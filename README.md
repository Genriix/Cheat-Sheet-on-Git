# Шпаргалка по работе с Git

## Что такое Git?

[Git](https://github.com/git/git/blob/master/README.md) - это инструмент контроля версий. 
С ним должен уметь работать каждый программист.
Git может быть интегрирован в графический интерфейс любой среды разработки, например, **Visual Studio**, или **Pycharm**.
В случае, когда Git встроен в среду разработки, производить контроль версий очень удобно, нажал пару кнопок, и готово!
Но знать как именно работает консольный интерфейс и уметь с ним работать должен каждый уважающий себя программист.

---

## Начнём с начала.

**В начале надо скачать Git на свой ПК**

Сделать это очень просто.
1. [переходим на этот сайт](https://git-scm.com/download/win);
2. Выбираем свою версию ОС в категории **Standalone Installer**;
3. Запускаем установщик;
4. Ставим галочки напротив пункта Git Bash Here — это позволит открывать консоль с Git в любой папке;
5. Жмаем много раз на Next, а в конце - Finish.

Всё! Наш Bash установлен, можем залетать в коммандную строку.
Осталось только настроить Bash под себя - указать имя пользователя и адрес, но это можно сделать с помощью видео на ютубе.

А теперь...

---

## Создаём папку, которую потом сделаем репозиторием

Сделать это можно через среду разработки (папка проекта), графичексий интерфейс проводника (ПКМ -> Создать -> Папку), но через консоль это делать прикольнее

В GitBash это можно сделать командой:
```
mkdir "название папки"
```

**Создаём объект фиксации**

Это может быть что угодно - файлы, текстовые документы и прочее.
Создать это тоже можно как угодно - через проводник, среду разработки и т.д.

Команда на Bash:
```BASH
touch "название_файла.расширение"
```

Всё, папка и объект фиксации есть, осталось самое простое!

---

## Создаём локальный репозиторий

Инициируем репозиторий:
```BASH
git init
```

> Если репозиторий мы создали по ошибке, то папку можно "разгитить":
> ```BASH
> rm -rf .git # удалили подпапку .git 
> ```

Для того, чтобы посмотреть "статус" репозитория абузим команду:
```BASH
git status
```

Дальше надо добавить файлы для наблюдения:
```BASH
git add . # Точка - открытая папка
```

Теперь надо зафиксировать изменения (добавление файлов тоже считается):
```BASH
git commit -m 'Описание коммита'
```
В описании коммита надо кратко описать изменения, которые мы фиксируем, чтобы потом было проще ориентироваться в старых коммитах

Ура! Теперь мы можем посмотреть на этот один гордый коммит:
```BASH
git log # Показывает историю коммитов
```

---

## SSH-ключ

Для начала регистрируемся на GitHub, создаём удалённый репозиторий, в графическом интерфейсе это достаточно просто сделать

А теперь... Что такое SSH-ключ?

> Когда компьютеры обмениваются данными в сети, они следуют сетевым протоколам (англ. network protocols) — правилам обмена данными между компьютерами.
> Один из наиболее распространённых сетевых протоколов — SSH (от англ. Secure Shell Protocol). Он обеспечивает безопасный обмен данными в сети. С помощью этого протокола можно получать данные с удалённого компьютера или отправлять их на него. Трафик шифруется, поэтому протокол безопасен.
> SSH использует пару ключей для обеспечения безопасности — публичный и приватный: 
> - Приватный ключ (англ. private key) хранится только на вашем компьютере и не должен передаваться кому-либо ещё. Он используется для расшифровки данных.
> - Публичный ключ (англ. public key) доступен всем и используется для шифрования данных. Они могут быть расшифрованы парным приватным ключом.
> Только вы можете расшифровать данные с помощью приватного ключа, но любой владелец публичного ключа может их для вас зашифровать. Эти два ключа связаны и образуют SSH-пару. В будущем вы наверняка будете использовать их для взаимодействия с GitHub и другими удалёнными серверами.

Теперь, когда мы примерно понимаем что такое SSH ключ, давайте проверим, есть ли этот ключ на нашем ПК

Для этого переходим в домашнюю папку:
```BASH
cd ~
```
И выводим список созданных ключей:
```BASH
ls -la .ssh/ # Открываем содержимое папки .ssh
```

Если папка пустая или её нет, всё в порядке. 
Если есть файлы с похожими названиями, SSH-ключи уже создавались:
* ```id_dsa.pub```;
* ```id_ecdsa.pub```;
* ```id_ed25519.pub```;
* ```id_rsa.pub```.

Если вы не создавали эти файлы, удаляем их все

---

## А теперь, алгоритм генерации SSH-ключа:

Для генерации SSH-пары можно использовать программу ssh-keygen. 
Открываем терминал и введите следующую команду.

```BASH
ssh-keygen -t ed25519 -C "электронная почта, к которой привязан ваш аккаунт на GitHub"
```

Используем электронную почту, к которой привязан наш GitHub-аккаунт.
Если на экране появилось сообщение об ошибке, то, скорее всего, ваша система не поддерживает алгоритм шифрования ed25519. 
Ничего страшного: используйте другой алгоритм.

```BASH
ssh-keygen -t rsa -b 4096 -C "электронная почта, к которой привязан ваш аккаунт на GitHub" 
```

После ввода отобразится такое сообщение.

```BASH
Generating public/private rsa key pair. # сгенерированы публичный и приватный ключи 
```

Укажите место хранения ключей. Простой вариант — сделать домашний каталог пользователя путём по умолчанию. 
Для этого нажмите Enter.
        
Windows

```BASH
Enter a file in which to save the key (C:\Users\<имя_пользователя>\.ssh\):[Press enter] 
```

Теперь в указанной директории появится пара ключей.
Программа запросит кодовую фразу (англ. passphrase) для доступа к SSH-ключу. 
Вы можете оставить поле пустым. Для этого нажмите Enter, а затем ещё раз Enter для подтверждения.

```BASH
Enter passphrase (empty for no passphrase): [Type a passphrase]
```
```BASH
Enter same passphrase again: [Type passphrase again] 
```

Готово! Теперь осталось проверить, что ключи действительно сгенерировались. Для этого вызовите эту команду.

```BASH
ls -a ~/.ssh 
```

На экране должны появиться два файла — один с расширением .pub, другой — без. 
Файл в .pub — публичный, им можно делиться с веб-сайтами или коллегами. 
Файл без расширения .pub — приватный. Ни в коем случае не показываем его никому! 

---

## Привязываем SSH-ключ к GitHub

1. Копируем содержимое ключа
   ```BASH
   # скопировать содержимое ключа в буфер обмена:
   clip < ~/.ssh/id_rsa.pub
   ```
   ```BASH
   # для ed25519:
   clip < ~/.ssh/id_ed25519.pub
   ```

2. Переходим на [GitHub](https://github.com/) и выбираем пункт **Settings** в меню аккаунта.

3. В меню слева нажимаем на пункт **SSH and GPG keys**.

4. В открывшейся вкладке выбираем **New SSH key**.

5. В поле **Title** напишем название ключа. 
   Например, "Personal key".

6. В поле **Key type** должно быть **Authentication Key**.

7. В поле **Key** скопируем наш ключ из буфера обмена.

8. Нажимаем на кнопку **Add SSH key**.

9. Проверяем правильность ключа с помощью следующей команды.

```BASH
$ ssh -T git@github.com 
```

Если это первый раз, когда вы используете Git, чтобы поделиться проектом на GitHub, появится похожее предупреждение.

```BASH
The authenticity of host 'github.com (140.82.121.4)' can't be established. 
ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU. 
This key is not known by any other names. Are you sure you want to continue connecting (yes/no/[fingerprint])? 
```

Это предупреждение сообщает, что вы никогда не соединялись с сервером GitHub. 
Поэтому Git не может гарантировать, что сервер является тем, за кого он себя выдаёт.

Для подтверждения подлинности сервер генерирует и публикует ключи SHA256. 
Вы можете проверить ключи GitHub [по этой ссылке](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints). 
Если ключ в предупреждении совпадает с тем, что вы видите на сайте, значит, сервер является действительным. 
Введите ```yes```, чтобы продолжить. 
Вы увидите приветствие на экране.

```BASH
Hi %ВАШ_АККАУНТ%! You've successfully authenticated, but GitHub does not provide shell access. 
```

---

## Связываем локальный и удалённый репозиторий

Находим ссылку на удалённый репозиторий, сделать это можно на страниче созданного репозитория.
Выбираем вариант SSH и копируем ссылку на репозиотрий.

После того, как мы создали локальный репозиторий, добавили файлы и создали коммит (или несколько) можем связать локальный и удалённый репозиторий

Для того, чтобы связать репозитории юзаем команду и вставляем ссылку на репозиторий
```BASH
git remote add origin Сюда_вставляем_ссылку
```

Теперь надо проверить, связаны ли репозитории
```BASH
 git remote -v
 ```

Мы на финишной прямой! Осталось отправить образец репозитория
 ```BASH
git push -u origin master # Вместо master может быть main, в зависимости какая у вас рабочая ветка, она написана в консоли после пути папки
```

